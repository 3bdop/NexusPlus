{
  "version": 3,
  "sources": ["../../@readyplayerme/visage/dist/index.esm.js"],
  "sourcesContent": ["import React, { useMemo, useEffect, useRef, useCallback, createContext, createElement, useContext, useReducer, useDebugValue, useState, Suspense, cloneElement } from 'react';\nimport { Environment as Environment$1, useBounds, PresentationControls, Bounds, ContactShadows, MeshReflectorMaterial } from '@react-three/drei';\nimport { Vector2, Vector3, Euler, LinearFilter, AnimationMixer, LoopRepeat, ACESFilmicToneMapping, TextureLoader, Object3D } from 'three';\nimport { useFrame, useGraph, useThree, Canvas, useLoader } from '@react-three/fiber';\nimport { GLTFLoader, DRACOLoader, FBXLoader, OrbitControls } from 'three-stdlib';\nimport { suspend } from 'suspend-react';\nimport { Bloom as Bloom$1, EffectComposer, SSAO, Vignette } from '@react-three/postprocessing';\nimport { BlendFunction } from 'postprocessing';\n\nconst environmentPresets = {\n    hub: 'hub',\n    sunset: 'sunset',\n    dawn: 'dawn',\n    night: 'night',\n    warehouse: 'warehouse',\n    forest: 'forest',\n    apartment: 'apartment',\n    studio: 'studio',\n    city: 'city',\n    park: 'park',\n    lobby: 'lobby',\n    soft: 'soft'\n};\nconst getPresetEnvironmentMap = (preset) => `https://readyplayerme-assets.s3.amazonaws.com/environment/${preset}.hdr`;\nconst environmentModels = {\n    spaceStation: 'https://readyplayerme-assets.s3.amazonaws.com/props/environment-space-station.glb',\n    platformDark: 'https://readyplayerme-assets.s3.amazonaws.com/props/simple-platform-dark.glb',\n    platformGreen: 'https://readyplayerme-assets.s3.amazonaws.com/props/simple-platform-green.glb',\n    platformBlue: 'https://readyplayerme-assets.s3.amazonaws.com/props/simple-platform-blue.glb'\n};\n\nconst Environment = ({ environment }) => {\n    const config = useMemo(() => {\n        const isStaticPreset = environment in environmentPresets;\n        const files = isStaticPreset ? getPresetEnvironmentMap(environment) : environment;\n        return {\n            files\n        };\n    }, [environment]);\n    return React.createElement(Environment$1, { files: config.files });\n};\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nconst validateSource = (source) => {\n    if (Array.isArray(source)) {\n        return source.length > 0 && source.every(validateSource);\n    }\n    if (typeof source === 'string') {\n        const fileEndExpression = new RegExp(/(.glb|.fbx|.fbx[?].*|.glb[?].*)$/g);\n        const uploadFileExpression = new RegExp(/^data:application\\/octet-stream;base64,/g);\n        const gltfModelExpression = new RegExp(/^data:model\\/gltf-binary;base64,/g);\n        return fileEndExpression.test(source) || uploadFileExpression.test(source) || gltfModelExpression.test(source);\n    }\n    if (source instanceof Blob) {\n        return source.type === 'model/gltf-binary';\n    }\n    return false;\n};\nconst isValidFormat = (source) => {\n    const isValid = validateSource(source);\n    if (source && !isValid) {\n        console.warn('Provided GLB/FBX is invalid. Check docs for supported formats: https://github.com/readyplayerme/visage');\n    }\n    return isValid;\n};\nconst clamp = (value, max, min) => Math.min(Math.max(min, value), max);\nconst lerp = (start, end, time = 0.05) => start * (1 - time) + end * time;\n/**\n * Avoid texture pixelation and add depth effect.\n */\nconst normaliseMaterialsConfig = (materials, bloomConfig) => {\n    Object.values(materials).forEach((material) => {\n        const mat = material;\n        if (mat.map) {\n            mat.map.minFilter = LinearFilter;\n            mat.depthWrite = true;\n        }\n        if (mat.name.toLowerCase().includes('hair')) {\n            mat.roughness = 0.9;\n        }\n        if (mat.emissiveMap) {\n            mat.emissiveIntensity = (bloomConfig === null || bloomConfig === void 0 ? void 0 : bloomConfig.materialIntensity) || 3.3;\n            mat.toneMapped = false;\n        }\n    });\n};\n/**\n * Avatar head movement relative to cursor.\n * When the model isn't a standard Ready Player Me avatar, the head movement won't take effect.\n */\nconst useHeadMovement = ({ nodes, isHalfBody = false, distance = 2, activeRotation = 0.2, rotationMargin = new Vector2(5, 10), enabled = false }) => {\n    const rad = Math.PI / 180;\n    const currentPos = new Vector2(0, 0);\n    const targetPos = new Vector2(0, 0);\n    const activeDistance = distance - (isHalfBody ? 1 : 0);\n    const eyeRotationOffsetX = isHalfBody ? 90 * rad : 0;\n    const neckBoneRotationOffsetX = (isHalfBody ? -5 : 10) * rad;\n    const mapRange = (value, inMin, inMax, outMin, outMax) => ((clamp(value, inMax, inMin) - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n    useFrame((state) => {\n        if (!enabled || !nodes.Neck || !nodes.Head || !nodes.RightEye || !nodes.LeftEye) {\n            return;\n        }\n        const cameraToHeadDistance = state.camera.position.distanceTo(nodes.Head.position);\n        const cameraRotation = Math.abs(state.camera.rotation.z);\n        if (cameraToHeadDistance < activeDistance && cameraRotation < activeRotation) {\n            targetPos.x = mapRange(state.mouse.y, -0.5, 1, rotationMargin.x * rad, -rotationMargin.x * rad);\n            targetPos.y = mapRange(state.mouse.x, -0.5, 0.5, -rotationMargin.y * rad, rotationMargin.y * rad);\n        }\n        else {\n            targetPos.set(0, 0);\n        }\n        currentPos.x = lerp(currentPos.x, targetPos.x);\n        currentPos.y = lerp(currentPos.y, targetPos.y);\n        /* eslint-disable no-param-reassign */\n        nodes.Neck.rotation.x = currentPos.x + neckBoneRotationOffsetX;\n        nodes.Neck.rotation.y = currentPos.y;\n        nodes.Head.rotation.x = currentPos.x;\n        nodes.Head.rotation.y = currentPos.y;\n        nodes.RightEye.rotation.x = currentPos.x - eyeRotationOffsetX;\n        nodes.LeftEye.rotation.x = currentPos.x - eyeRotationOffsetX;\n        if (isHalfBody) {\n            nodes.RightEye.rotation.z = currentPos.y * 2 + Math.PI;\n            nodes.LeftEye.rotation.z = currentPos.y * 2 + Math.PI;\n        }\n        else {\n            nodes.RightEye.rotation.y = currentPos.y * 2;\n            nodes.LeftEye.rotation.y = currentPos.y * 2;\n        }\n    });\n};\n/**\n * Transfers Bone positions from source to target.\n * @param targetNodes {object} - object that will be mutated\n * @param sourceNodes {object} - object that will be used as reference\n */\nconst mutatePose = (targetNodes, sourceNodes) => {\n    if (targetNodes && sourceNodes) {\n        Object.keys(targetNodes).forEach((key) => {\n            if (targetNodes[key].type === 'Bone' && sourceNodes[key]) {\n                /* eslint-disable no-param-reassign */\n                const pos = sourceNodes[key].position;\n                targetNodes[key].position.set(pos.x, pos.y, pos.z);\n                const rot = sourceNodes[key].rotation;\n                targetNodes[key].rotation.set(rot.x, rot.y, rot.z);\n            }\n        });\n    }\n};\nconst useEmotion = (nodes, emotion) => {\n    // @ts-ignore\n    const meshes = Object.values(nodes).filter((item) => item === null || item === void 0 ? void 0 : item.morphTargetInfluences);\n    const resetEmotions = (resetMeshes) => {\n        resetMeshes.forEach((mesh) => {\n            var _a;\n            (_a = mesh === null || mesh === void 0 ? void 0 : mesh.morphTargetInfluences) === null || _a === void 0 ? void 0 : _a.forEach((_, index) => {\n                mesh.morphTargetInfluences[index] = 0;\n            });\n        });\n    };\n    useFrame(() => {\n        if (emotion) {\n            resetEmotions(meshes);\n            meshes.forEach((mesh) => {\n                Object.entries(emotion).forEach(([shape, value]) => {\n                    var _a;\n                    const shapeId = (_a = mesh === null || mesh === void 0 ? void 0 : mesh.morphTargetDictionary) === null || _a === void 0 ? void 0 : _a[shape];\n                    if (shapeId) {\n                        mesh.morphTargetInfluences[shapeId] = value;\n                    }\n                });\n            });\n        }\n        else {\n            resetEmotions(meshes);\n        }\n    });\n};\nconst loader = new GLTFLoader();\nconst dracoLoader = new DRACOLoader();\ndracoLoader.setDecoderPath('https://www.gstatic.com/draco/versioned/decoders/1.5.5/');\nloader.setDRACOLoader(dracoLoader);\nconst useGltfLoader = (source) => suspend(() => __awaiter(void 0, void 0, void 0, function* () {\n    if (source instanceof Blob) {\n        const buffer = yield source.arrayBuffer();\n        return (yield loader.parseAsync(buffer, ''));\n    }\n    return loader.loadAsync(source);\n}), [source], { lifespan: 100 });\nfunction usePersistantRotation(scene) {\n    const refToPreviousScene = useRef(scene);\n    useEffect(() => {\n        if (refToPreviousScene.current !== scene) {\n            // eslint-disable-next-line no-param-reassign\n            scene.rotation.y = refToPreviousScene.current.rotation.y;\n            refToPreviousScene.current = scene;\n        }\n    }, [scene]);\n}\nclass Transform {\n    constructor() {\n        this.scale = new Vector3(1, 1, 1);\n        this.rotation = new Euler(0, 0, 0);\n        this.position = new Vector3(0, 0, 0);\n    }\n}\n/**\n * Builds a fallback model for given nodes.\n * Useful for displaying as the suspense fallback object.\n */\nfunction buildFallback(nodes, transform = new Transform()) {\n    return (React.createElement(\"group\", null, Object.keys(nodes).map((key) => {\n        const node = nodes[key];\n        if (node.type === 'SkinnedMesh') {\n            return (React.createElement(\"skinnedMesh\", { castShadow: true, receiveShadow: true, key: node.name, scale: transform.scale, position: transform.position, rotation: transform.rotation, geometry: node.geometry, material: node.material, skeleton: node.skeleton, morphTargetInfluences: node.morphTargetInfluences || [] }));\n        }\n        if (node.type === 'Mesh') {\n            return (React.createElement(\"mesh\", { castShadow: true, receiveShadow: true, key: node.name, scale: transform.scale, position: transform.position, rotation: transform.rotation, geometry: node.geometry, material: node.material, morphTargetInfluences: node.morphTargetInfluences || [] }));\n        }\n        return null;\n    })));\n}\nconst useFallback = (nodes, setter) => useEffect(() => {\n    if (typeof setter === 'function') {\n        setter(buildFallback(nodes));\n    }\n}, [setter, nodes]);\nconst triggerCallback = (callback) => {\n    if (typeof callback === 'function') {\n        callback();\n    }\n};\nconst expressions = {\n    blink: [\n        {\n            morphTarget: 'eyesClosed',\n            morphTargetIndex: -1,\n            offset: 0,\n            duration: 0.2\n        },\n        {\n            morphTarget: 'eyeSquintLeft',\n            morphTargetIndex: -1,\n            offset: 0,\n            duration: 0.2\n        },\n        {\n            morphTarget: 'eyeSquintRight',\n            morphTargetIndex: -1,\n            offset: 0,\n            duration: 0.2\n        }\n    ]\n};\n/**\n * Animates avatars facial expressions when morphTargets=ARKit,Eyes Extra is provided with the avatar.\n */\nconst useIdleExpression = (expression, nodes) => {\n    const headMesh = (nodes.Wolf3D_Head || nodes.Wolf3D_Avatar);\n    const selectedExpression = expression in expressions ? expressions[expression] : undefined;\n    const timeout = useRef();\n    const duration = useRef(Number.POSITIVE_INFINITY);\n    useEffect(() => {\n        if ((headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetDictionary) && selectedExpression) {\n            for (let i = 0; i < selectedExpression.length; i++) {\n                selectedExpression[i].morphTargetIndex = headMesh.morphTargetDictionary[selectedExpression[i].morphTarget];\n            }\n        }\n    }, [selectedExpression === null || selectedExpression === void 0 ? void 0 : selectedExpression.length]);\n    const animateExpression = useCallback((delta) => {\n        if ((headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetInfluences) && selectedExpression) {\n            duration.current += delta;\n            for (let i = 0; i < selectedExpression.length; i++) {\n                const section = selectedExpression[i];\n                if (duration.current < section.duration + section.offset) {\n                    if (duration.current > section.offset) {\n                        const pivot = ((duration.current - section.offset) / section.duration) * Math.PI;\n                        const morphInfluence = Math.sin(pivot);\n                        headMesh.morphTargetInfluences[section.morphTargetIndex] = morphInfluence;\n                    }\n                }\n                else {\n                    headMesh.morphTargetInfluences[section.morphTargetIndex] = 0;\n                }\n            }\n        }\n    }, [headMesh === null || headMesh === void 0 ? void 0 : headMesh.morphTargetInfluences, selectedExpression, duration.current, timeout.current]);\n    const setNextInterval = () => {\n        duration.current = 0;\n        const delay = Math.random() * 3000 + 3000;\n        clearTimeout(timeout.current);\n        timeout.current = setTimeout(setNextInterval, delay);\n    };\n    useEffect(() => {\n        if (selectedExpression) {\n            timeout.current = setTimeout(setNextInterval, 3000);\n        }\n        return () => {\n            clearTimeout(timeout.current);\n        };\n    }, [selectedExpression]);\n    useFrame((_, delta) => {\n        if (headMesh && selectedExpression) {\n            animateExpression(delta);\n        }\n    });\n};\n\nconst hasWindow = typeof window !== 'undefined';\n\nlet keyCount = 0;\nfunction atom(read, write) {\n  const key = `atom${++keyCount}`;\n  const config = {\n    toString: () => key\n  };\n  if (typeof read === \"function\") {\n    config.read = read;\n  } else {\n    config.init = read;\n    config.read = (get) => get(config);\n    config.write = (get, set, arg) => set(\n      config,\n      typeof arg === \"function\" ? arg(get(config)) : arg\n    );\n  }\n  if (write) {\n    config.write = write;\n  }\n  return config;\n}\n\nconst hasInitialValue = (atom) => \"init\" in atom;\nconst isActuallyWritableAtom = (atom) => !!atom.write;\nconst cancelPromiseMap = /* @__PURE__ */ new WeakMap();\nconst registerCancelPromise = (promise, cancel) => {\n  cancelPromiseMap.set(promise, cancel);\n  promise.catch(() => {\n  }).finally(() => cancelPromiseMap.delete(promise));\n};\nconst cancelPromise = (promise, next) => {\n  const cancel = cancelPromiseMap.get(promise);\n  if (cancel) {\n    cancelPromiseMap.delete(promise);\n    cancel(next);\n  }\n};\nconst resolvePromise = (promise, value) => {\n  promise.status = \"fulfilled\";\n  promise.value = value;\n};\nconst rejectPromise = (promise, e) => {\n  promise.status = \"rejected\";\n  promise.reason = e;\n};\nconst isPromiseLike$1 = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nconst isEqualAtomValue = (a, b) => \"v\" in a && \"v\" in b && Object.is(a.v, b.v);\nconst isEqualAtomError = (a, b) => \"e\" in a && \"e\" in b && Object.is(a.e, b.e);\nconst hasPromiseAtomValue = (a) => \"v\" in a && a.v instanceof Promise;\nconst isEqualPromiseAtomValue = (a, b) => \"v\" in a && \"v\" in b && a.v.orig && a.v.orig === b.v.orig;\nconst returnAtomValue = (atomState) => {\n  if (\"e\" in atomState) {\n    throw atomState.e;\n  }\n  return atomState.v;\n};\nconst createStore = () => {\n  const atomStateMap = /* @__PURE__ */ new WeakMap();\n  const mountedMap = /* @__PURE__ */ new WeakMap();\n  const pendingMap = /* @__PURE__ */ new Map();\n  let storeListenersRev1;\n  let storeListenersRev2;\n  let mountedAtoms;\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    storeListenersRev1 = /* @__PURE__ */ new Set();\n    storeListenersRev2 = /* @__PURE__ */ new Set();\n    mountedAtoms = /* @__PURE__ */ new Set();\n  }\n  const getAtomState = (atom) => atomStateMap.get(atom);\n  const setAtomState = (atom, atomState) => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      Object.freeze(atomState);\n    }\n    const prevAtomState = atomStateMap.get(atom);\n    atomStateMap.set(atom, atomState);\n    if (!pendingMap.has(atom)) {\n      pendingMap.set(atom, prevAtomState);\n    }\n    if (prevAtomState && hasPromiseAtomValue(prevAtomState)) {\n      const next = \"v\" in atomState ? atomState.v instanceof Promise ? atomState.v : Promise.resolve(atomState.v) : Promise.reject(atomState.e);\n      cancelPromise(prevAtomState.v, next);\n    }\n  };\n  const updateDependencies = (atom, nextAtomState, nextDependencies) => {\n    const dependencies = /* @__PURE__ */ new Map();\n    let changed = false;\n    nextDependencies.forEach((aState, a) => {\n      if (!aState && a === atom) {\n        aState = nextAtomState;\n      }\n      if (aState) {\n        dependencies.set(a, aState);\n        if (nextAtomState.d.get(a) !== aState) {\n          changed = true;\n        }\n      } else if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n        console.warn(\"[Bug] atom state not found\");\n      }\n    });\n    if (changed || nextAtomState.d.size !== dependencies.size) {\n      nextAtomState.d = dependencies;\n    }\n  };\n  const setAtomValue = (atom, value, nextDependencies) => {\n    const prevAtomState = getAtomState(atom);\n    const nextAtomState = {\n      d: (prevAtomState == null ? void 0 : prevAtomState.d) || /* @__PURE__ */ new Map(),\n      v: value\n    };\n    if (nextDependencies) {\n      updateDependencies(atom, nextAtomState, nextDependencies);\n    }\n    if (prevAtomState && isEqualAtomValue(prevAtomState, nextAtomState) && prevAtomState.d === nextAtomState.d) {\n      return prevAtomState;\n    }\n    if (prevAtomState && hasPromiseAtomValue(prevAtomState) && hasPromiseAtomValue(nextAtomState) && isEqualPromiseAtomValue(prevAtomState, nextAtomState)) {\n      if (prevAtomState.d === nextAtomState.d) {\n        return prevAtomState;\n      } else {\n        nextAtomState.v = prevAtomState.v;\n      }\n    }\n    setAtomState(atom, nextAtomState);\n    return nextAtomState;\n  };\n  const setAtomValueOrPromise = (atom, valueOrPromise, nextDependencies, abortPromise) => {\n    if (isPromiseLike$1(valueOrPromise)) {\n      let continuePromise;\n      const promise = new Promise((resolve, reject) => {\n        let settled = false;\n        valueOrPromise.then(\n          (v) => {\n            if (!settled) {\n              settled = true;\n              const prevAtomState = getAtomState(atom);\n              const nextAtomState = setAtomValue(\n                atom,\n                promise,\n                nextDependencies\n              );\n              resolvePromise(promise, v);\n              resolve(v);\n              if ((prevAtomState == null ? void 0 : prevAtomState.d) !== nextAtomState.d) {\n                mountDependencies(atom, nextAtomState, prevAtomState == null ? void 0 : prevAtomState.d);\n              }\n            }\n          },\n          (e) => {\n            if (!settled) {\n              settled = true;\n              const prevAtomState = getAtomState(atom);\n              const nextAtomState = setAtomValue(\n                atom,\n                promise,\n                nextDependencies\n              );\n              rejectPromise(promise, e);\n              reject(e);\n              if ((prevAtomState == null ? void 0 : prevAtomState.d) !== nextAtomState.d) {\n                mountDependencies(atom, nextAtomState, prevAtomState == null ? void 0 : prevAtomState.d);\n              }\n            }\n          }\n        );\n        continuePromise = (next) => {\n          if (!settled) {\n            settled = true;\n            next.then(\n              (v) => resolvePromise(promise, v),\n              (e) => rejectPromise(promise, e)\n            );\n            resolve(next);\n          }\n        };\n      });\n      promise.orig = valueOrPromise;\n      promise.status = \"pending\";\n      registerCancelPromise(promise, (next) => {\n        if (next) {\n          continuePromise(next);\n        }\n        abortPromise == null ? void 0 : abortPromise();\n      });\n      return setAtomValue(atom, promise, nextDependencies);\n    }\n    return setAtomValue(atom, valueOrPromise, nextDependencies);\n  };\n  const setAtomError = (atom, error, nextDependencies) => {\n    const prevAtomState = getAtomState(atom);\n    const nextAtomState = {\n      d: (prevAtomState == null ? void 0 : prevAtomState.d) || /* @__PURE__ */ new Map(),\n      e: error\n    };\n    if (nextDependencies) {\n      updateDependencies(atom, nextAtomState, nextDependencies);\n    }\n    if (prevAtomState && isEqualAtomError(prevAtomState, nextAtomState) && prevAtomState.d === nextAtomState.d) {\n      return prevAtomState;\n    }\n    setAtomState(atom, nextAtomState);\n    return nextAtomState;\n  };\n  const readAtomState = (atom) => {\n    const atomState = getAtomState(atom);\n    if (atomState) {\n      atomState.d.forEach((_, a) => {\n        if (a !== atom && !mountedMap.has(a)) {\n          readAtomState(a);\n        }\n      });\n      if (Array.from(atomState.d).every(([a, s]) => {\n        const aState = getAtomState(a);\n        return a === atom || aState === s || // TODO This is a hack, we should find a better solution.\n        aState && !hasPromiseAtomValue(aState) && isEqualAtomValue(aState, s);\n      })) {\n        return atomState;\n      }\n    }\n    const nextDependencies = /* @__PURE__ */ new Map();\n    let isSync = true;\n    const getter = (a) => {\n      if (a === atom) {\n        const aState2 = getAtomState(a);\n        if (aState2) {\n          nextDependencies.set(a, aState2);\n          return returnAtomValue(aState2);\n        }\n        if (hasInitialValue(a)) {\n          nextDependencies.set(a, void 0);\n          return a.init;\n        }\n        throw new Error(\"no atom init\");\n      }\n      const aState = readAtomState(a);\n      nextDependencies.set(a, aState);\n      return returnAtomValue(aState);\n    };\n    let controller;\n    let setSelf;\n    const options = {\n      get signal() {\n        if (!controller) {\n          controller = new AbortController();\n        }\n        return controller.signal;\n      },\n      get setSelf() {\n        if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !isActuallyWritableAtom(atom)) {\n          console.warn(\"setSelf function cannot be used with read-only atom\");\n        }\n        if (!setSelf && isActuallyWritableAtom(atom)) {\n          setSelf = (...args) => {\n            if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && isSync) {\n              console.warn(\"setSelf function cannot be called in sync\");\n            }\n            if (!isSync) {\n              return writeAtom(atom, ...args);\n            }\n          };\n        }\n        return setSelf;\n      }\n    };\n    try {\n      const valueOrPromise = atom.read(getter, options);\n      return setAtomValueOrPromise(\n        atom,\n        valueOrPromise,\n        nextDependencies,\n        () => controller == null ? void 0 : controller.abort()\n      );\n    } catch (error) {\n      return setAtomError(atom, error, nextDependencies);\n    } finally {\n      isSync = false;\n    }\n  };\n  const readAtom = (atom) => returnAtomValue(readAtomState(atom));\n  const addAtom = (atom) => {\n    let mounted = mountedMap.get(atom);\n    if (!mounted) {\n      mounted = mountAtom(atom);\n    }\n    return mounted;\n  };\n  const canUnmountAtom = (atom, mounted) => !mounted.l.size && (!mounted.t.size || mounted.t.size === 1 && mounted.t.has(atom));\n  const delAtom = (atom) => {\n    const mounted = mountedMap.get(atom);\n    if (mounted && canUnmountAtom(atom, mounted)) {\n      unmountAtom(atom);\n    }\n  };\n  const recomputeDependents = (atom) => {\n    const dependencyMap = /* @__PURE__ */ new Map();\n    const dirtyMap = /* @__PURE__ */ new WeakMap();\n    const loop1 = (a) => {\n      const mounted = mountedMap.get(a);\n      mounted == null ? void 0 : mounted.t.forEach((dependent) => {\n        if (dependent !== a) {\n          dependencyMap.set(\n            dependent,\n            (dependencyMap.get(dependent) || /* @__PURE__ */ new Set()).add(a)\n          );\n          dirtyMap.set(dependent, (dirtyMap.get(dependent) || 0) + 1);\n          loop1(dependent);\n        }\n      });\n    };\n    loop1(atom);\n    const loop2 = (a) => {\n      const mounted = mountedMap.get(a);\n      mounted == null ? void 0 : mounted.t.forEach((dependent) => {\n        var _a;\n        if (dependent !== a) {\n          let dirtyCount = dirtyMap.get(dependent);\n          if (dirtyCount) {\n            dirtyMap.set(dependent, --dirtyCount);\n          }\n          if (!dirtyCount) {\n            let isChanged = !!((_a = dependencyMap.get(dependent)) == null ? void 0 : _a.size);\n            if (isChanged) {\n              const prevAtomState = getAtomState(dependent);\n              const nextAtomState = readAtomState(dependent);\n              isChanged = !prevAtomState || !isEqualAtomValue(prevAtomState, nextAtomState);\n            }\n            if (!isChanged) {\n              dependencyMap.forEach((s) => s.delete(dependent));\n            }\n          }\n          loop2(dependent);\n        }\n      });\n    };\n    loop2(atom);\n  };\n  const writeAtomState = (atom, ...args) => {\n    let isSync = true;\n    const getter = (a) => returnAtomValue(readAtomState(a));\n    const setter = (a, ...args2) => {\n      let r;\n      if (a === atom) {\n        if (!hasInitialValue(a)) {\n          throw new Error(\"atom not writable\");\n        }\n        const prevAtomState = getAtomState(a);\n        const nextAtomState = setAtomValueOrPromise(a, args2[0]);\n        if (!prevAtomState || !isEqualAtomValue(prevAtomState, nextAtomState)) {\n          recomputeDependents(a);\n        }\n      } else {\n        r = writeAtomState(a, ...args2);\n      }\n      if (!isSync) {\n        const flushed = flushPending();\n        if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n          storeListenersRev2.forEach(\n            (l) => l({ type: \"async-write\", flushed })\n          );\n        }\n      }\n      return r;\n    };\n    const result = atom.write(getter, setter, ...args);\n    isSync = false;\n    return result;\n  };\n  const writeAtom = (atom, ...args) => {\n    const result = writeAtomState(atom, ...args);\n    const flushed = flushPending();\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      storeListenersRev2.forEach(\n        (l) => l({ type: \"write\", flushed })\n      );\n    }\n    return result;\n  };\n  const mountAtom = (atom, initialDependent) => {\n    const mounted = {\n      t: new Set(initialDependent && [initialDependent]),\n      l: /* @__PURE__ */ new Set()\n    };\n    mountedMap.set(atom, mounted);\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      mountedAtoms.add(atom);\n    }\n    readAtomState(atom).d.forEach((_, a) => {\n      const aMounted = mountedMap.get(a);\n      if (aMounted) {\n        aMounted.t.add(atom);\n      } else {\n        if (a !== atom) {\n          mountAtom(a, atom);\n        }\n      }\n    });\n    readAtomState(atom);\n    if (isActuallyWritableAtom(atom) && atom.onMount) {\n      const onUnmount = atom.onMount((...args) => writeAtom(atom, ...args));\n      if (onUnmount) {\n        mounted.u = onUnmount;\n      }\n    }\n    return mounted;\n  };\n  const unmountAtom = (atom) => {\n    var _a;\n    const onUnmount = (_a = mountedMap.get(atom)) == null ? void 0 : _a.u;\n    if (onUnmount) {\n      onUnmount();\n    }\n    mountedMap.delete(atom);\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      mountedAtoms.delete(atom);\n    }\n    const atomState = getAtomState(atom);\n    if (atomState) {\n      if (hasPromiseAtomValue(atomState)) {\n        cancelPromise(atomState.v);\n      }\n      atomState.d.forEach((_, a) => {\n        if (a !== atom) {\n          const mounted = mountedMap.get(a);\n          if (mounted) {\n            mounted.t.delete(atom);\n            if (canUnmountAtom(a, mounted)) {\n              unmountAtom(a);\n            }\n          }\n        }\n      });\n    } else if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\"[Bug] could not find atom state to unmount\", atom);\n    }\n  };\n  const mountDependencies = (atom, atomState, prevDependencies) => {\n    const depSet = new Set(atomState.d.keys());\n    prevDependencies == null ? void 0 : prevDependencies.forEach((_, a) => {\n      if (depSet.has(a)) {\n        depSet.delete(a);\n        return;\n      }\n      const mounted = mountedMap.get(a);\n      if (mounted) {\n        mounted.t.delete(atom);\n        if (canUnmountAtom(a, mounted)) {\n          unmountAtom(a);\n        }\n      }\n    });\n    depSet.forEach((a) => {\n      const mounted = mountedMap.get(a);\n      if (mounted) {\n        mounted.t.add(atom);\n      } else if (mountedMap.has(atom)) {\n        mountAtom(a, atom);\n      }\n    });\n  };\n  const flushPending = () => {\n    let flushed;\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      flushed = /* @__PURE__ */ new Set();\n    }\n    while (pendingMap.size) {\n      const pending = Array.from(pendingMap);\n      pendingMap.clear();\n      pending.forEach(([atom, prevAtomState]) => {\n        const atomState = getAtomState(atom);\n        if (atomState) {\n          if (atomState.d !== (prevAtomState == null ? void 0 : prevAtomState.d)) {\n            mountDependencies(atom, atomState, prevAtomState == null ? void 0 : prevAtomState.d);\n          }\n          const mounted = mountedMap.get(atom);\n          if (mounted && !// TODO This seems pretty hacky. Hope to fix it.\n          // Maybe we could `mountDependencies` in `setAtomState`?\n          (prevAtomState && !hasPromiseAtomValue(prevAtomState) && (isEqualAtomValue(prevAtomState, atomState) || isEqualAtomError(prevAtomState, atomState)))) {\n            mounted.l.forEach((listener) => listener());\n            if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n              flushed.add(atom);\n            }\n          }\n        } else if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n          console.warn(\"[Bug] no atom state to flush\");\n        }\n      });\n    }\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      storeListenersRev1.forEach((l) => l(\"state\"));\n      return flushed;\n    }\n  };\n  const subscribeAtom = (atom, listener) => {\n    const mounted = addAtom(atom);\n    const flushed = flushPending();\n    const listeners = mounted.l;\n    listeners.add(listener);\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      storeListenersRev1.forEach((l) => l(\"sub\"));\n      storeListenersRev2.forEach(\n        (l) => l({ type: \"sub\", flushed })\n      );\n    }\n    return () => {\n      listeners.delete(listener);\n      delAtom(atom);\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n        storeListenersRev1.forEach((l) => l(\"unsub\"));\n        storeListenersRev2.forEach((l) => l({ type: \"unsub\" }));\n      }\n    };\n  };\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    return {\n      get: readAtom,\n      set: writeAtom,\n      sub: subscribeAtom,\n      // store dev methods (these are tentative and subject to change without notice)\n      dev_subscribe_store: (l, rev) => {\n        if (rev !== 2) {\n          console.warn(\n            \"The current StoreListener revision is 2. The older ones are deprecated.\"\n          );\n          storeListenersRev1.add(l);\n          return () => {\n            storeListenersRev1.delete(l);\n          };\n        }\n        storeListenersRev2.add(l);\n        return () => {\n          storeListenersRev2.delete(l);\n        };\n      },\n      dev_get_mounted_atoms: () => mountedAtoms.values(),\n      dev_get_atom_state: (a) => atomStateMap.get(a),\n      dev_get_mounted: (a) => mountedMap.get(a),\n      dev_restore_atoms: (values) => {\n        for (const [atom, valueOrPromise] of values) {\n          if (hasInitialValue(atom)) {\n            setAtomValueOrPromise(atom, valueOrPromise);\n            recomputeDependents(atom);\n          }\n        }\n        const flushed = flushPending();\n        storeListenersRev2.forEach(\n          (l) => l({ type: \"restore\", flushed })\n        );\n      }\n    };\n  }\n  return {\n    get: readAtom,\n    set: writeAtom,\n    sub: subscribeAtom\n  };\n};\nlet defaultStore;\nconst getDefaultStore = () => {\n  if (!defaultStore) {\n    defaultStore = createStore();\n  }\n  return defaultStore;\n};\nif ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n  if (globalThis.__JOTAI_PACKAGE_IS_LOADED__) {\n    console.warn(\n      \"Detected multiple Jotai instances. It may cause unexpected behavior. https://github.com/pmndrs/jotai/discussions/2044\"\n    );\n  } else {\n    globalThis.__JOTAI_PACKAGE_IS_LOADED__ = true;\n  }\n}\n\nconst StoreContext = createContext(void 0);\nconst useStore = (options) => {\n  const store = useContext(StoreContext);\n  return (options == null ? void 0 : options.store) || store || getDefaultStore();\n};\nconst Provider = ({\n  children,\n  store\n}) => {\n  const storeRef = useRef();\n  if (!store && !storeRef.current) {\n    storeRef.current = createStore();\n  }\n  return createElement(\n    StoreContext.Provider,\n    {\n      value: store || storeRef.current\n    },\n    children\n  );\n};\n\nconst isPromiseLike = (x) => typeof (x == null ? void 0 : x.then) === \"function\";\nconst use = React.use || ((promise) => {\n  if (promise.status === \"pending\") {\n    throw promise;\n  } else if (promise.status === \"fulfilled\") {\n    return promise.value;\n  } else if (promise.status === \"rejected\") {\n    throw promise.reason;\n  } else {\n    promise.status = \"pending\";\n    promise.then(\n      (v) => {\n        promise.status = \"fulfilled\";\n        promise.value = v;\n      },\n      (e) => {\n        promise.status = \"rejected\";\n        promise.reason = e;\n      }\n    );\n    throw promise;\n  }\n});\nfunction useAtomValue(atom, options) {\n  const store = useStore(options);\n  const [[valueFromReducer, storeFromReducer, atomFromReducer], rerender] = useReducer(\n    (prev) => {\n      const nextValue = store.get(atom);\n      if (Object.is(prev[0], nextValue) && prev[1] === store && prev[2] === atom) {\n        return prev;\n      }\n      return [nextValue, store, atom];\n    },\n    void 0,\n    () => [store.get(atom), store, atom]\n  );\n  let value = valueFromReducer;\n  if (storeFromReducer !== store || atomFromReducer !== atom) {\n    rerender();\n    value = store.get(atom);\n  }\n  const delay = options == null ? void 0 : options.delay;\n  useEffect(() => {\n    const unsub = store.sub(atom, () => {\n      if (typeof delay === \"number\") {\n        setTimeout(rerender, delay);\n        return;\n      }\n      rerender();\n    });\n    rerender();\n    return unsub;\n  }, [store, atom, delay]);\n  useDebugValue(value);\n  return isPromiseLike(value) ? use(value) : value;\n}\n\nfunction useSetAtom(atom, options) {\n  const store = useStore(options);\n  const setAtom = useCallback(\n    (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && !(\"write\" in atom)) {\n        throw new Error(\"not writable atom\");\n      }\n      return store.set(atom, ...args);\n    },\n    [store, atom]\n  );\n  return setAtom;\n}\n\nconst MIXAMO_PREFIX = 'mixamorig';\nconst POSITION_SUFFIX = '.position';\nconst MIXAMO_SCALE = 0.01;\nconst fbxLoader = new FBXLoader();\nconst gltfLoader = new GLTFLoader();\nfunction normaliseFbxAnimation(fbx, index = 0) {\n    const { tracks } = fbx.animations[index];\n    for (let i = 0; i < tracks.length; i += 1) {\n        const hasMixamoPrefix = tracks[i].name.includes(MIXAMO_PREFIX);\n        if (hasMixamoPrefix) {\n            tracks[i].name = tracks[i].name.replace(MIXAMO_PREFIX, '');\n        }\n        if (tracks[i].name.includes(POSITION_SUFFIX)) {\n            for (let j = 0; j < tracks[i].values.length; j += 1) {\n                // Scale the bound size down to match the size of the model\n                // eslint-disable-next-line operator-assignment\n                tracks[i].values[j] = tracks[i].values[j] * MIXAMO_SCALE;\n            }\n        }\n    }\n    return fbx.animations[index];\n}\nconst loadBlobFile = (blob) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        const buffer = yield blob.arrayBuffer();\n        return {\n            group: (yield gltfLoader.parseAsync(buffer, '')),\n            isFbx: false\n        };\n    }\n    catch (e) {\n        return {\n            group: (yield fbxLoader.loadAsync(URL.createObjectURL(blob))),\n            isFbx: true\n        };\n    }\n});\nconst loadPathFile = (source) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        return {\n            group: (yield gltfLoader.loadAsync(source)),\n            isFbx: false\n        };\n    }\n    catch (e) {\n        return {\n            group: (yield fbxLoader.loadAsync(source)),\n            isFbx: true\n        };\n    }\n});\nconst loadAnimationClip = (source) => __awaiter(void 0, void 0, void 0, function* () {\n    const animation = source instanceof Blob ? yield loadBlobFile(source) : yield loadPathFile(source);\n    return animation.isFbx ? normaliseFbxAnimation(animation.group) : animation.group.animations[0];\n});\n\nconst SpawnEffect = ({ onLoadedEffect, onLoadedEffectFinish }) => {\n    const ref = useRef(null);\n    const [effectRunning, setEffectRunning] = React.useState(true);\n    const { scene: mountEffectScene } = useGltfLoader(onLoadedEffect.src);\n    const { nodes: mountEffectNode } = useGraph(mountEffectScene);\n    useEffect(() => {\n        if (!effectRunning) {\n            triggerCallback(onLoadedEffectFinish);\n        }\n    }, [onLoadedEffectFinish, effectRunning]);\n    const animationLoadedEffect = useMemo(() => __awaiter(void 0, void 0, void 0, function* () { return loadAnimationClip((onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.animationSrc) || onLoadedEffect.src); }), [onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.animationSrc, onLoadedEffect.src]);\n    const spawnEffectMixer = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(mountEffectNode.Scene);\n        const loadedEffect = yield animationLoadedEffect;\n        if (!loadedEffect) {\n            setEffectRunning(false);\n            return mixer;\n        }\n        const animation = mixer.clipAction(loadedEffect);\n        animation.setLoop(LoopRepeat, (onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.loop) || 1);\n        animation.clampWhenFinished = true;\n        animation.play();\n        mixer.addEventListener('finished', () => {\n            animation.fadeOut(0.5);\n            setEffectRunning(false);\n        });\n        return mixer;\n    }), [mountEffectNode.Scene, animationLoadedEffect, onLoadedEffect === null || onLoadedEffect === void 0 ? void 0 : onLoadedEffect.loop]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        (_a = (yield spawnEffectMixer)) === null || _a === void 0 ? void 0 : _a.update(delta);\n    }));\n    return React.createElement(React.Fragment, null, effectRunning && React.createElement(\"primitive\", { modelRef: ref, object: mountEffectScene }));\n};\n\nconst SpawnAnimation = ({ avatar, onLoadedAnimationFinish, onLoadedAnimation }) => {\n    const [animationRunning, setAnimationRunning] = React.useState(true);\n    useEffect(() => {\n        if (!animationRunning) {\n            triggerCallback(onLoadedAnimationFinish);\n        }\n    }, [onLoadedAnimationFinish, animationRunning]);\n    const { nodes: avatarNode } = useGraph(avatar);\n    const animationClip = useMemo(() => __awaiter(void 0, void 0, void 0, function* () { return loadAnimationClip((onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.src) || ''); }), [onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.src]);\n    const animationMixerAvatar = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(avatarNode.Armature);\n        if (!avatarNode.Armature) {\n            return mixer;\n        }\n        const animation = mixer.clipAction(yield animationClip);\n        animation.setLoop(LoopRepeat, (onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.loop) || 1);\n        animation.clampWhenFinished = true;\n        animation.play();\n        mixer.addEventListener('finished', () => {\n            animation.fadeOut(0.5);\n            setAnimationRunning(false);\n        });\n        return mixer;\n    }), [avatarNode.Armature, onLoadedAnimation === null || onLoadedAnimation === void 0 ? void 0 : onLoadedAnimation.loop, animationClip]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        (_a = (yield animationMixerAvatar)) === null || _a === void 0 ? void 0 : _a.update(delta);\n    }));\n    return React.createElement(React.Fragment, null);\n};\n\nconst initialSpawnState = {\n    onLoadedEffect: null,\n    onLoadedAnimation: null\n};\nconst spawnState = atom(initialSpawnState);\n\nconst Spawn = ({ avatar, onSpawnFinish }) => {\n    var _a, _b;\n    const animationProps = useAtomValue(spawnState);\n    const usesMountEffect = isValidFormat((_a = animationProps === null || animationProps === void 0 ? void 0 : animationProps.onLoadedEffect) === null || _a === void 0 ? void 0 : _a.src);\n    const usesMountAnimation = isValidFormat((_b = animationProps === null || animationProps === void 0 ? void 0 : animationProps.onLoadedAnimation) === null || _b === void 0 ? void 0 : _b.src);\n    const [effectRunning, setEffectRunning] = React.useState(usesMountEffect);\n    const [animationRunning, setAnimationRunning] = React.useState(usesMountAnimation);\n    useEffect(() => {\n        if (!animationRunning && !effectRunning) {\n            triggerCallback(onSpawnFinish);\n        }\n    }, [onSpawnFinish, effectRunning, animationRunning]);\n    const onLoadedAnimationFinish = () => {\n        setAnimationRunning(false);\n    };\n    const onLoadedEffectFinish = () => {\n        setEffectRunning(false);\n    };\n    return (React.createElement(React.Fragment, null,\n        usesMountEffect && (React.createElement(SpawnEffect, { onLoadedEffect: animationProps.onLoadedEffect, onLoadedEffectFinish: onLoadedEffectFinish })),\n        usesMountAnimation && (React.createElement(SpawnAnimation, { onLoadedAnimation: animationProps.onLoadedAnimation, avatar: avatar, onLoadedAnimationFinish: onLoadedAnimationFinish }))));\n};\n\nconst ROTATION_STEP = 0.005;\nconst Model = ({ scene, scale = 1, modelRef, onLoaded, onSpawnAnimationFinish, bloom }) => {\n    const { materials } = useGraph(scene);\n    const { gl } = useThree();\n    const [isTouching, setIsTouching] = useState(false);\n    const [touchEvent, setTouchEvent] = useState(null);\n    const setTouchingOn = (e) => {\n        if (hasWindow && window.TouchEvent && e instanceof TouchEvent) {\n            setTouchEvent(e);\n        }\n        setIsTouching(true);\n    };\n    const setTouchingOff = (e) => {\n        if (hasWindow && window.TouchEvent && e instanceof TouchEvent) {\n            setTouchEvent(null);\n        }\n        setIsTouching(false);\n    };\n    usePersistantRotation(scene);\n    const onTouchMove = useCallback((event) => {\n        if (isTouching && event instanceof MouseEvent) {\n            /* eslint-disable-next-line no-param-reassign */\n            scene.rotation.y += event.movementX * ROTATION_STEP;\n        }\n        if (hasWindow && isTouching && window.TouchEvent && event instanceof TouchEvent) {\n            /* eslint-disable-next-line no-param-reassign */\n            const movementX = Math.round(event.touches[0].pageX - touchEvent.touches[0].pageX);\n            /* eslint-disable-next-line no-param-reassign */\n            scene.rotation.y += movementX * ROTATION_STEP;\n            setTouchEvent(event);\n        }\n    }, [isTouching, touchEvent, scene]);\n    normaliseMaterialsConfig(materials, bloom);\n    scene.traverse((object) => {\n        const node = object;\n        if (node.isMesh) {\n            node.castShadow = true;\n        }\n        if (node.type === 'SkinnedMesh') {\n            node.receiveShadow = true;\n        }\n    });\n    useEffect(() => triggerCallback(onLoaded), [scene, materials, onLoaded]);\n    useEffect(() => {\n        gl.domElement.addEventListener('mousedown', setTouchingOn);\n        gl.domElement.addEventListener('touchstart', setTouchingOn, { passive: true });\n        window.addEventListener('mouseup', setTouchingOff);\n        gl.domElement.addEventListener('touchend', setTouchingOff);\n        gl.domElement.addEventListener('touchcancel', setTouchingOff);\n        window.addEventListener('mousemove', onTouchMove);\n        gl.domElement.addEventListener('touchmove', onTouchMove, { passive: true });\n        return () => {\n            gl.domElement.removeEventListener('mousedown', setTouchingOn);\n            gl.domElement.removeEventListener('touchstart', setTouchingOn);\n            window.removeEventListener('mouseup', setTouchingOff);\n            gl.domElement.removeEventListener('touchend', setTouchingOff);\n            gl.domElement.removeEventListener('touchcancel', setTouchingOff);\n            window.removeEventListener('mousemove', onTouchMove);\n            gl.domElement.removeEventListener('touchmove', onTouchMove);\n        };\n    });\n    const spawnComponent = useMemo(() => React.createElement(Spawn, { avatar: scene, onSpawnFinish: onSpawnAnimationFinish }), [onSpawnAnimationFinish]);\n    return (React.createElement(\"group\", { ref: modelRef, dispose: null, rotation: [0, 0, 0] },\n        React.createElement(\"primitive\", { object: scene, scale: scale }),\n        spawnComponent));\n};\n\nconst FloatingModel = ({ modelSrc, scale = 1.0, onLoaded, bloom }) => {\n    const ref = useRef(null);\n    const { scene } = useGltfLoader(modelSrc);\n    useFrame((state) => {\n        const t = state.clock.getElapsedTime();\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            ref.current.rotation.y = Math.sin(t / 2) / 8;\n            ref.current.position.y = (1 + Math.sin(t / 1.5)) / -9;\n        }\n    });\n    return React.createElement(Model, { modelRef: ref, scale: scale, scene: scene, onLoaded: onLoaded, bloom: bloom });\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst FloatingModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(FloatingModel, Object.assign({}, props, { setModelFallback: setFallback }))));\n};\n\nconst StaticModel = ({ modelSrc, modelRef, scale = 1, setModelFallback, onLoaded, emotion, bloom }) => {\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    useEmotion(nodes, emotion);\n    useFallback(nodes, setModelFallback);\n    return React.createElement(Model, { modelRef: modelRef, scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom });\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst StaticModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(StaticModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nconst BoundsModelContainer = ({ modelSrc, children, fit, onLoaded }) => {\n    const bounds = useBounds();\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    const onChildLoaded = useCallback(() => {\n        if (fit) {\n            bounds.refresh().clip().fit();\n        }\n        triggerCallback(onLoaded);\n    }, [bounds, fit]);\n    const childModel = useMemo(() => React.Children.map(children, (child) => cloneElement(child, { setModelFallback: setFallback, onLoaded: onChildLoaded })), [modelSrc, children, onChildLoaded]);\n    useEffect(() => {\n        if (fit) {\n            bounds.refresh().clip().fit();\n        }\n    }, [modelSrc, fit, fallback]);\n    return React.createElement(React.Fragment, null, childModel);\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z$1 = \".BaseCanvas-module_base-canvas__Xjohd {\\n  width: 100%;\\n  height: 100%;\\n  margin: 0;\\n  padding: 0;\\n}\";\nvar styles$1 = {\"base-canvas\":\"BaseCanvas-module_base-canvas__Xjohd\"};\nstyleInject(css_248z$1);\n\nconst BASE_DPR = hasWindow ? window.devicePixelRatio : 1;\nconst BaseCanvas = ({ children = undefined, fov = 50, position = new Vector3(0, 0, 5), style, dpr = [BASE_DPR * 0.5, 2], className }) => (React.createElement(Canvas, { key: fov, className: `${styles$1['base-canvas']} ${className !== null && className !== void 0 ? className : ''}`, shadows: \"soft\", gl: { preserveDrawingBuffer: true, alpha: true, toneMappingExposure: 1.6, toneMapping: ACESFilmicToneMapping }, dpr: dpr, camera: { fov, position }, resize: { scroll: true, debounce: { scroll: 50, resize: 0 } }, style: Object.assign(Object.assign({}, style), { background: 'transparent' }) }, children));\n\nconst Capture = ({ trigger, settings, callBack }) => {\n    const gl = useThree((state) => state.gl);\n    const type = (settings === null || settings === void 0 ? void 0 : settings.type) || 'image/png';\n    const quality = (settings === null || settings === void 0 ? void 0 : settings.quality) || 0.1;\n    useEffect(() => {\n        if (trigger) {\n            const capture = gl.domElement.toDataURL(type, quality);\n            callBack(capture);\n        }\n        /* eslint-disable-next-line react-hooks/exhaustive-deps */\n    }, [trigger]);\n    // eslint-disable-next-line react/jsx-no-useless-fragment\n    return React.createElement(React.Fragment, null);\n};\n\nconst BackgroundColor = ({ color }) => React.createElement(\"color\", { attach: \"background\", args: [color] });\n\nconst Box = (_a) => {\n    var { src = '' } = _a, baseProps = __rest(_a, [\"src\"]);\n    const ref = useRef(null);\n    const texture = useLoader(TextureLoader, src);\n    return (React.createElement(\"mesh\", Object.assign({ ref: ref, castShadow: true, receiveShadow: true }, baseProps),\n        React.createElement(\"boxBufferGeometry\", null),\n        React.createElement(\"meshPhysicalMaterial\", { map: texture })));\n};\n\n/**\n * Interactive presentation of any GLTF (.glb) asset.\n */\nconst Exhibit = ({ modelSrc, scale = 1.0, environment = 'city', position, style, className, shadows = false, float = false, fit = false, capture, snap = false, lockVertical = false, onLoaded, onLoading }) => {\n    const model = useMemo(() => {\n        if (!isValidFormat(modelSrc)) {\n            return null;\n        }\n        if (!float) {\n            return React.createElement(StaticModelContainer, { modelSrc: modelSrc, scale: scale });\n        }\n        return React.createElement(FloatingModelContainer, { modelSrc: modelSrc, scale: scale });\n    }, [float, modelSrc, scale]);\n    useEffect(() => triggerCallback(onLoading), [modelSrc, onLoading]);\n    return (React.createElement(BaseCanvas, { position: position, style: style, className: className },\n        React.createElement(Suspense, { fallback: null },\n            React.createElement(\"ambientLight\", { intensity: 0.5 }),\n            React.createElement(\"spotLight\", { position: [10, 10, 10], angle: 0.15, penumbra: 1, \"shadow-mapSize\": [512, 512], castShadow: true }),\n            React.createElement(PresentationControls, { global: true, config: { mass: 2, tension: 500 }, snap: snap, rotation: [0, -0.3, 0], polar: lockVertical ? [0, 0] : [-Math.PI / 3, Math.PI / 3], azimuth: [-Infinity, Infinity] }, model && (React.createElement(Bounds, { fit: fit, clip: fit, observe: fit },\n                React.createElement(BoundsModelContainer, { modelSrc: modelSrc, fit: fit, onLoaded: onLoaded }, model)))),\n            shadows && React.createElement(ContactShadows, { position: [0, -1.0, 0], opacity: 0.75, scale: 10, blur: 2.6, far: 2 }),\n            React.createElement(Environment, { environment: environment })),\n        capture && React.createElement(Capture, Object.assign({}, capture)),\n        (style === null || style === void 0 ? void 0 : style.background) && React.createElement(BackgroundColor, { color: style.background })));\n};\n\nlet currentRotation$1 = 0;\nconst AnimationModel = ({ modelSrc, animationSrc, rotation = 20 * (Math.PI / 180), scale = 1, idleRotation = false, setModelFallback, onLoaded, headMovement = false, emotion, bloom }) => {\n    const ref = useRef(null);\n    const [animationRunning, setAnimationRunning] = useState(true);\n    const onSpawnAnimationFinish = () => {\n        setAnimationRunning(false);\n    };\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    const animationClip = useMemo(() => __awaiter(void 0, void 0, void 0, function* () { return loadAnimationClip(animationSrc); }), [animationSrc]);\n    const animationMixer = useMemo(() => __awaiter(void 0, void 0, void 0, function* () {\n        const mixer = new AnimationMixer(nodes.Armature);\n        if (animationRunning) {\n            return mixer;\n        }\n        const animation = mixer.clipAction(yield animationClip);\n        animation.fadeIn(0);\n        animation.play();\n        mixer.update(0);\n        return mixer;\n    }), [animationRunning, animationClip, nodes.Armature]);\n    useFrame((state, delta) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        (_a = (yield animationMixer)) === null || _a === void 0 ? void 0 : _a.update(delta);\n        if (!idleRotation) {\n            return;\n        }\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            currentRotation$1 += delta * 0.2;\n            ref.current.rotation.y = rotation + Math.sin(currentRotation$1) / 3;\n        }\n    }));\n    useHeadMovement({ nodes, enabled: headMovement });\n    useEmotion(nodes, emotion);\n    useIdleExpression('blink', nodes);\n    useFallback(nodes, setModelFallback);\n    return (React.createElement(Model, { modelRef: ref, scene: scene, scale: scale, onLoaded: onLoaded, onSpawnAnimationFinish: onSpawnAnimationFinish, bloom: bloom }));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst AnimationModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(AnimationModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nlet currentRotation = 0;\nconst HalfBodyModel = ({ modelSrc, scale = 1, rotation = 20 * (Math.PI / 180), idleRotation = false, emotion, setModelFallback, onLoaded, headMovement = false, bloom }) => {\n    const ref = useRef(null);\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    scene.traverse((object) => {\n        const node = object;\n        if (node.name === 'Wolf3D_Hands') {\n            node.visible = false;\n        }\n        if (node.name === 'RightHand') {\n            node.position.set(0, -2, 0);\n        }\n        if (node.name === 'LeftHand') {\n            node.position.set(0, -2, 0);\n        }\n    });\n    useFrame((state, delta) => {\n        if (!idleRotation) {\n            return;\n        }\n        if (ref === null || ref === void 0 ? void 0 : ref.current) {\n            currentRotation += delta * 0.2;\n            ref.current.rotation.y = rotation + Math.sin(currentRotation) / 3;\n        }\n    });\n    useHeadMovement({ nodes, isHalfBody: true, enabled: headMovement });\n    useIdleExpression('blink', nodes);\n    useEmotion(nodes, emotion);\n    useFallback(nodes, setModelFallback);\n    return React.createElement(Model, { modelRef: ref, scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom });\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst HalfBodyModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(HalfBodyModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nconst PoseModel = ({ modelSrc, poseSrc, modelRef, scale = 1, emotion, setModelFallback, onLoaded, bloom }) => {\n    const { scene } = useGltfLoader(modelSrc);\n    const { nodes } = useGraph(scene);\n    const pose = useGltfLoader(poseSrc);\n    const { nodes: sourceNodes } = useGraph(pose.scene);\n    mutatePose(nodes, sourceNodes);\n    useEmotion(nodes, emotion);\n    useFallback(nodes, setModelFallback);\n    return React.createElement(Model, { modelRef: modelRef, scene: scene, scale: scale, onLoaded: onLoaded, bloom: bloom });\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst PoseModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(PoseModel, Object.assign({ setModelFallback: setFallback }, props))));\n};\n\nconst EnvironmentModel = ({ environment, scale = 1, setModelFallback, onLoaded }) => {\n    const transform = new Transform();\n    const { scene } = useGltfLoader(environment);\n    const { nodes } = useGraph(scene);\n    useFallback(nodes, setModelFallback);\n    useEffect(() => triggerCallback(onLoaded), [scene, onLoaded]);\n    return (React.createElement(\"group\", null, Object.keys(nodes).map((key) => {\n        const node = nodes[key];\n        if (node.type === 'Mesh') {\n            return (React.createElement(\"mesh\", { receiveShadow: true, key: node.name, scale: scale, position: transform.position, rotation: transform.rotation, geometry: node.geometry, material: node.material, morphTargetInfluences: node.morphTargetInfluences || [] }));\n        }\n        return null;\n    })));\n};\n\n/**\n * Contains model to handle suspense fallback.\n */\nconst EnvironmentModelContainer = (props) => {\n    /* eslint-disable-next-line react/jsx-no-useless-fragment */\n    const [fallback, setFallback] = useState(React.createElement(React.Fragment, null));\n    const { environment } = props;\n    const isStaticPreset = environment in environmentModels;\n    const environmentSrc = isStaticPreset ? environmentModels[environment] : environment;\n    return (React.createElement(Suspense, { fallback: fallback },\n        React.createElement(EnvironmentModel, Object.assign({ setModelFallback: setFallback }, props, { environment: environmentSrc }))));\n};\n\nlet controls;\nlet progress = Number.POSITIVE_INFINITY;\nconst updateCameraFocus = (camera, delta, target) => {\n    if (target && progress <= 1) {\n        camera.position.setX(lerp(camera.position.x, target.x, progress));\n        camera.position.setZ(lerp(camera.position.z, target.z, progress));\n        progress += delta;\n    }\n};\nconst updateCameraTarget = (camera, target, minDistance, maxDistance) => {\n    if (controls) {\n        let distance = controls.target.distanceTo(camera.position);\n        distance = clamp(distance, maxDistance, minDistance);\n        const pivot = (distance - minDistance) / (maxDistance - minDistance);\n        controls.target.set(0, target - 0.6 * pivot, 0);\n    }\n};\nconst CameraControls = ({ cameraTarget, cameraInitialDistance, cameraZoomTarget, headScale = 1, controlsMinDistance = 0.4, controlsMaxDistance = 2.5, updateCameraTargetOnZoom = false }) => {\n    const cameraZoomTargetRef = useRef(cameraZoomTarget);\n    const { camera, gl } = useThree();\n    const fallbackCameraTarget = cameraTarget || 1.475 + headScale / 10;\n    const headScaleAdjustedMinDistance = controlsMinDistance + headScale / 10;\n    useEffect(() => {\n        var _a, _b, _c;\n        if (((_a = cameraZoomTargetRef.current) === null || _a === void 0 ? void 0 : _a.x) !== (cameraZoomTarget === null || cameraZoomTarget === void 0 ? void 0 : cameraZoomTarget.x) ||\n            ((_b = cameraZoomTargetRef.current) === null || _b === void 0 ? void 0 : _b.y) !== (cameraZoomTarget === null || cameraZoomTarget === void 0 ? void 0 : cameraZoomTarget.y) ||\n            ((_c = cameraZoomTargetRef.current) === null || _c === void 0 ? void 0 : _c.z) !== (cameraZoomTarget === null || cameraZoomTarget === void 0 ? void 0 : cameraZoomTarget.z)) {\n            cameraZoomTargetRef.current = cameraZoomTarget;\n            progress = 0;\n        }\n        controls = new OrbitControls(camera, gl.domElement);\n        controls.enableRotate = false;\n        controls.enablePan = false;\n        controls.minDistance = headScaleAdjustedMinDistance;\n        controls.maxDistance = controlsMaxDistance;\n        controls.minPolarAngle = 1.4;\n        controls.maxPolarAngle = 1.4;\n        controls.target.set(0, fallbackCameraTarget, 0);\n        controls.update();\n        // TODO: Look for a better distance initialiser, without progress value check it conflicts with cameraZoomTarget which also can update camera position.z\n        if (cameraInitialDistance && progress === Number.POSITIVE_INFINITY) {\n            camera.position.z = cameraInitialDistance;\n            controls.update();\n        }\n        return () => {\n            controls.dispose();\n        };\n    }, [\n        cameraInitialDistance,\n        camera,\n        controlsMinDistance,\n        controlsMaxDistance,\n        fallbackCameraTarget,\n        gl.domElement,\n        headScaleAdjustedMinDistance,\n        cameraZoomTarget\n    ]);\n    useFrame((_, delta) => {\n        if (updateCameraTargetOnZoom) {\n            updateCameraTarget(camera, fallbackCameraTarget, headScaleAdjustedMinDistance, controlsMaxDistance);\n        }\n        updateCameraFocus(camera, delta, cameraZoomTarget);\n        if (controls) {\n            controls.update();\n        }\n    });\n    return null;\n};\n\nvar css_248z = \".Loader-module_loader__Ukoov {\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n.Loader-module_dots__KfhUo {\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.Loader-module_dot__qTWRh {\\n  background-color: rgb(236, 236, 236);\\n  width: 8px;\\n  height: 8px;\\n  margin: 2px;\\n  border-radius: 100%;\\n  display: inline-block;\\n}\\n.Loader-module_dot__qTWRh:nth-child(1) {\\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.12s infinite normal both running Loader-module_glowing__nwo3q;\\n}\\n.Loader-module_dot__qTWRh:nth-child(2) {\\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.24s infinite normal both running Loader-module_glowing__nwo3q;\\n}\\n.Loader-module_dot__qTWRh:nth-child(3) {\\n  animation: 0.75s cubic-bezier(0.2, 0.68, 0.18, 1.08) 0.36s infinite normal both running Loader-module_glowing__nwo3q;\\n}\\n\\n@keyframes Loader-module_glowing__nwo3q {\\n  0% {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n  45% {\\n    transform: scale(0.1);\\n    opacity: 0.7;\\n  }\\n  80% {\\n    transform: scale(1);\\n    opacity: 1;\\n  }\\n}\";\nvar styles = {\"loader\":\"Loader-module_loader__Ukoov\",\"dots\":\"Loader-module_dots__KfhUo\",\"dot\":\"Loader-module_dot__qTWRh\",\"glowing\":\"Loader-module_glowing__nwo3q\"};\nstyleInject(css_248z);\n\nconst Loader = () => (React.createElement(\"div\", { className: styles.loader },\n    React.createElement(\"div\", { className: styles.dots }, [1, 2, 3].map((it) => (React.createElement(\"div\", { key: it, className: styles.dot }))))));\n\nconst Bloom = ({ luminanceThreshold = 1, luminanceSmoothing = 1, mipmapBlur = true, intensity = 0.1, kernelSize = 0 }) => (React.createElement(Bloom$1, { luminanceThreshold: luminanceThreshold, luminanceSmoothing: luminanceSmoothing, mipmapBlur: mipmapBlur, intensity: intensity, kernelSize: kernelSize }));\n\nconst fromEntries = (arr) => Object.assign({}, ...arr.map(([k, v]) => ({ [k]: v })));\nconst definedProps = (obj) => fromEntries(\n// eslint-disable-next-line\nObject.entries(obj).filter(([k, v]) => v !== undefined));\n\nconst LIGHT_CONFIG = Object.freeze({\n    fillLightAngle: Math.PI / 3,\n    backLightAngle: Math.PI / 8,\n    keyLightAngle: Math.PI,\n    silhouetteLightAngle: Math.PI * 1.5,\n    keyLightPosition: new Vector3(0.5, 1.55, 0.5),\n    liftLightPosition: new Vector3(0.25, 1.7, 2.0),\n    dirLightPosition: new Vector3(-0.75, 2.5, -1.0),\n    silhouetteLightPosition: new Vector3(-1.5, 0.1, -1.5),\n    defaultProps: {\n        keyLightIntensity: 0.8,\n        keyLightColor: '#FFFFFF',\n        fillLightIntensity: 3.0,\n        fillLightColor: '#6794FF',\n        fillLightPosition: new Vector3(-0.5, 1.6, -0.5),\n        backLightIntensity: 6.0,\n        backLightColor: '#FFB878',\n        backLightPosition: new Vector3(0.5, 1.6, -1.0),\n        lightTarget: new Vector3(0.0, 1.7, 0.0)\n    }\n});\nconst Lights = (lightingProps) => {\n    // use default props as fallback if no custom lighting settings are provided\n    const { keyLightIntensity, keyLightColor, fillLightIntensity, fillLightColor, fillLightPosition, backLightIntensity, backLightColor, backLightPosition, lightTarget } = Object.assign(LIGHT_CONFIG.defaultProps, definedProps(lightingProps));\n    const { scene } = useThree();\n    const [targets] = useState({\n        head: new Object3D(),\n        shoe: new Object3D()\n    });\n    useEffect(() => {\n        // apply provided positions for targets\n        targets.head.position.copy(lightTarget);\n        targets.shoe.position.set(0.0, 0.0, 0.0);\n        // add targets to scene (without the spotlights would not aim at them)\n        scene.add(targets.head);\n        scene.add(targets.shoe);\n    }, []);\n    return (React.createElement(\"group\", null,\n        React.createElement(\"spotLight\", { position: fillLightPosition, target: targets.head, angle: LIGHT_CONFIG.fillLightAngle, color: fillLightColor, intensity: fillLightIntensity, castShadow: true }),\n        React.createElement(\"spotLight\", { position: backLightPosition, target: targets.head, angle: LIGHT_CONFIG.backLightAngle, color: backLightColor, intensity: backLightIntensity, castShadow: true }),\n        React.createElement(\"spotLight\", { position: LIGHT_CONFIG.keyLightPosition, target: targets.head, angle: LIGHT_CONFIG.keyLightAngle, color: keyLightColor, intensity: keyLightIntensity, castShadow: true }),\n        React.createElement(\"spotLight\", { position: LIGHT_CONFIG.liftLightPosition, target: targets.shoe, angle: LIGHT_CONFIG.keyLightAngle, color: keyLightColor, intensity: keyLightIntensity * 0.25, castShadow: true }),\n        React.createElement(\"spotLight\", { position: LIGHT_CONFIG.silhouetteLightPosition, target: targets.head, angle: LIGHT_CONFIG.silhouetteLightAngle, color: keyLightColor, intensity: keyLightIntensity * 0.25, castShadow: true })));\n};\n\nconst CAMERA = {\n    TARGET: {\n        FULL_BODY: {\n            MALE: 1.65,\n            FEMALE: 1.55\n        },\n        HALF_BODY: 0.6\n    },\n    INITIAL_DISTANCE: {\n        FULL_BODY: 0.4,\n        HALF_BODY: 0.5\n    },\n    CONTROLS: {\n        FULL_BODY: {\n            MIN_DISTANCE: 0.5,\n            MAX_DISTANCE: 3.2,\n            ZOOM_TARGET: new Vector3(-0.11, 0, 3.2)\n        },\n        HALF_BODY: {\n            MIN_DISTANCE: 0.4,\n            MAX_DISTANCE: 1.4,\n            ZOOM_TARGET: new Vector3(-0.15, 0, 0.55)\n        }\n    }\n};\n/**\n * Interactive avatar presentation with zooming and horizontal rotation controls.\n * Optimised for full-body and half-body avatars.\n */\nconst Avatar = ({ modelSrc, animationSrc = undefined, poseSrc = undefined, environment = 'soft', halfBody = false, shadows = false, scale = 1, cameraTarget = CAMERA.TARGET.FULL_BODY.MALE, cameraInitialDistance = CAMERA.INITIAL_DISTANCE.FULL_BODY, style, emotion, idleRotation = false, capture, background, onLoaded, onLoading, dpr, className, headMovement = false, cameraZoomTarget = CAMERA.CONTROLS.FULL_BODY.ZOOM_TARGET, onLoadedEffect, onLoadedAnimation, children, effects, keyLightIntensity, keyLightColor, fillLightIntensity, fillLightColor, fillLightPosition, backLightIntensity, backLightColor, backLightPosition, lightTarget, fov = 50 }) => {\n    var _a, _b, _c, _d, _e;\n    const setSpawnState = useSetAtom(spawnState);\n    useEffect(() => {\n        setSpawnState({ onLoadedEffect, onLoadedAnimation });\n    }, [onLoadedAnimation, onLoadedEffect, setSpawnState]);\n    const AvatarModel = useMemo(() => {\n        if (!isValidFormat(modelSrc)) {\n            return null;\n        }\n        if (!!animationSrc && !halfBody && isValidFormat(animationSrc)) {\n            return (React.createElement(AnimationModelContainer, { emotion: emotion, modelSrc: modelSrc, animationSrc: animationSrc, scale: scale, idleRotation: idleRotation, onLoaded: onLoaded, headMovement: headMovement, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom }));\n        }\n        if (halfBody) {\n            return (React.createElement(HalfBodyModelContainer, { emotion: emotion, modelSrc: modelSrc, scale: scale, idleRotation: idleRotation, onLoaded: onLoaded, headMovement: headMovement, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom }));\n        }\n        if (isValidFormat(poseSrc)) {\n            return (React.createElement(PoseModelContainer, { emotion: emotion, modelSrc: modelSrc, scale: scale, poseSrc: poseSrc, onLoaded: onLoaded, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom }));\n        }\n        return (React.createElement(StaticModelContainer, { modelSrc: modelSrc, scale: scale, onLoaded: onLoaded, emotion: emotion, bloom: effects === null || effects === void 0 ? void 0 : effects.bloom }));\n    }, [halfBody, animationSrc, modelSrc, scale, poseSrc, idleRotation, emotion, onLoaded, headMovement, effects === null || effects === void 0 ? void 0 : effects.bloom]);\n    useEffect(() => triggerCallback(onLoading), [modelSrc, animationSrc, onLoading]);\n    return (React.createElement(BaseCanvas, { position: new Vector3(0, 0, 3), fov: fov, style: style, dpr: dpr, className: className },\n        React.createElement(Environment, { environment: environment }),\n        React.createElement(CameraControls, { cameraTarget: cameraTarget, cameraInitialDistance: cameraInitialDistance, cameraZoomTarget: cameraZoomTarget, controlsMinDistance: halfBody ? CAMERA.CONTROLS.HALF_BODY.MIN_DISTANCE : CAMERA.CONTROLS.FULL_BODY.MIN_DISTANCE, controlsMaxDistance: halfBody ? CAMERA.CONTROLS.HALF_BODY.MAX_DISTANCE : CAMERA.CONTROLS.FULL_BODY.MAX_DISTANCE, updateCameraTargetOnZoom: !halfBody }),\n        AvatarModel,\n        children,\n        shadows && React.createElement(ContactShadows, { position: [0, 0, 0], opacity: 2, scale: 10, blur: 1.0, far: 1.0 }),\n        (background === null || background === void 0 ? void 0 : background.src) && React.createElement(Box, Object.assign({}, background)),\n        capture && React.createElement(Capture, Object.assign({}, capture)),\n        (background === null || background === void 0 ? void 0 : background.color) && React.createElement(BackgroundColor, { color: background.color }),\n        ((effects === null || effects === void 0 ? void 0 : effects.ambientOcclusion) || (effects === null || effects === void 0 ? void 0 : effects.bloom) || (effects === null || effects === void 0 ? void 0 : effects.vignette)) && (React.createElement(EffectComposer, { autoClear: true, multisampling: 4 },\n            React.createElement(React.Fragment, null,\n                (effects === null || effects === void 0 ? void 0 : effects.ambientOcclusion) && (React.createElement(SSAO, { blendFunction: BlendFunction.MULTIPLY, distanceScaling: false, radius: 0.08, bias: 0.01, intensity: 3, samples: 31, worldDistanceThreshold: 24, worldDistanceFalloff: 0, worldProximityThreshold: 0, worldProximityFalloff: 6, fade: 0.02, rings: 8 })),\n                (effects === null || effects === void 0 ? void 0 : effects.bloom) && (React.createElement(Bloom, { luminanceThreshold: (_a = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _a === void 0 ? void 0 : _a.luminanceThreshold, luminanceSmoothing: (_b = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _b === void 0 ? void 0 : _b.luminanceSmoothing, intensity: (_c = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _c === void 0 ? void 0 : _c.intensity, kernelSize: (_d = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _d === void 0 ? void 0 : _d.kernelSize, mipmapBlur: (_e = effects === null || effects === void 0 ? void 0 : effects.bloom) === null || _e === void 0 ? void 0 : _e.mipmapBlur })),\n                (effects === null || effects === void 0 ? void 0 : effects.vignette) && React.createElement(Vignette, { eskil: false, offset: 0.5, darkness: 0.5 })))),\n        React.createElement(Lights, { keyLightIntensity: keyLightIntensity, keyLightColor: keyLightColor, fillLightIntensity: fillLightIntensity, fillLightColor: fillLightColor, fillLightPosition: fillLightPosition, backLightIntensity: backLightIntensity, backLightColor: backLightColor, backLightPosition: backLightPosition, lightTarget: lightTarget })));\n};\nconst AvatarWrapper = (props) => {\n    var _a;\n    return (React.createElement(Suspense, { fallback: (_a = props.loader) !== null && _a !== void 0 ? _a : React.createElement(Loader, null) },\n        React.createElement(Provider, null,\n            React.createElement(Avatar, Object.assign({}, props)))));\n};\n\nconst FloorReflection = (_a) => {\n    var { resolution = 512, mixBlur = 0.8, mixStrength = 80, metalness = 0.5, blur = [300, 200], mirror = 1, minDepthThreshold = 0.4, maxDepthThreshold = 1.4, depthScale = 1.2, depthToBlurRatioBias = 1, distortion = 0, mixContrast = 1, reflectorOffset = 0, roughness = 1, color } = _a, props = __rest(_a, [\"resolution\", \"mixBlur\", \"mixStrength\", \"metalness\", \"blur\", \"mirror\", \"minDepthThreshold\", \"maxDepthThreshold\", \"depthScale\", \"depthToBlurRatioBias\", \"distortion\", \"mixContrast\", \"reflectorOffset\", \"roughness\", \"color\"]);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"fog\", { attach: \"fog\", args: [color, 2, 6] }),\n        React.createElement(\"group\", { position: [0, 0, 0] },\n            React.createElement(\"mesh\", { rotation: [-Math.PI / 2, 0, 0] },\n                React.createElement(\"planeGeometry\", { args: [20, 10] }),\n                React.createElement(MeshReflectorMaterial, Object.assign({ resolution: resolution, mixBlur: mixBlur, mixStrength: mixStrength, metalness: metalness, blur: blur, mirror: mirror, minDepthThreshold: minDepthThreshold, maxDepthThreshold: maxDepthThreshold, depthScale: depthScale, depthToBlurRatioBias: depthToBlurRatioBias, distortion: distortion, mixContrast: mixContrast, reflectorOffset: reflectorOffset, roughness: roughness, color: color, envMapIntensity: 0 }, props))))));\n};\n\nexport { AnimationModelContainer as AnimationModel, AvatarWrapper as Avatar, CAMERA, EnvironmentModelContainer as EnvironmentModel, Exhibit, FloatingModelContainer as FloatingModel, FloorReflection, HalfBodyModelContainer as HalfBodyModel, PoseModelContainer as PoseModel, StaticModelContainer as StaticModel };\n"],
  "mappings": "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",
  "names": ["Environment", "React", "React", "atom", "Environment", "Bloom"]
}
